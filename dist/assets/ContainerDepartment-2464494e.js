import{X as j,D as h,r as c,j as e,J as u,M as m,Y as f,O as v,_ as y,T as S,U as g,P as C,Q as E,R as M,I as x}from"./index-df07a18a.js";import{C as R}from"./Card-050bf3e7.js";import{M as _}from"./Modal-128b9747.js";import{u as k}from"./useMutation-cf360b2b.js";import{u as I}from"./useToast-6e1913b2.js";import{u as q,g as A}from"./department-service-381213db.js";import{u as D}from"./useQuery-a2607d27.js";const T=()=>{const o=j(),{setLoading:t}=h(),{successToast:i,errorToast:n}=I();return k({mutationFn:r=>q(r),onMutate:()=>{t(!0)},onError:async r=>{t(!1),n(r)},onSuccess:async r=>{i(r),o.invalidateQueries({queryKey:["departments"]})},onSettled:()=>{t(!1)}})},O=({isOpen:o,data:t,onDidDismiss:i})=>{const[n,r]=c.useState({}),{mutate:d}=T(),a=(s,l)=>{r(b=>({...b,[s]:l}))},p=s=>{s.preventDefault(),d(n),i()};return c.useEffect(()=>{r(s=>({...s,id:t==null?void 0:t.id,name:t==null?void 0:t.name,abbreviation:t==null?void 0:t.abbreviation,inActive:t==null?void 0:t.inActive}))},[t]),e.jsx(_,{title:"Update Department",isOpen:o,onDidDismiss:i,children:e.jsxs("form",{onSubmit:p,children:[e.jsx(u,{children:e.jsx(m,{type:"text",label:"Id",labelPlacement:"floating",value:n==null?void 0:n.id,onIonInput:s=>a("id",s.detail.value),required:!0,disabled:!0})}),e.jsx(u,{children:e.jsx(m,{type:"text",label:"Name",labelPlacement:"floating",value:n==null?void 0:n.name,onIonInput:s=>a("name",s.detail.value),required:!0})}),e.jsx(u,{children:e.jsx(m,{type:"text",label:"Abbreviation",labelPlacement:"floating",value:n==null?void 0:n.abbreviation,onIonInput:s=>a("abbreviation",s.detail.value),required:!0})}),e.jsx(u,{children:e.jsx(f,{checked:n==null?void 0:n.inActive,onIonChange:s=>a("inActive",s.detail.checked),children:"InActive"})}),e.jsx(v,{type:"submit",expand:"block",children:"Submit"})]})})},P=()=>{const{setLoading:o}=h(),{errorToast:t}=I();return D({queryKey:["departments"],queryFn:()=>A(),onError:async i=>{t(i),o(!1)},onSettled:async()=>{o(!1)},refetchOnWindowFocus:!1,retry:!1})},U=c.lazy(()=>y(()=>import("./TableDepartment-6ead40b5.js"),["assets/TableDepartment-6ead40b5.js","assets/index-df07a18a.js","assets/index-4515709d.css","assets/Table-78c0577c.js","assets/date-fns-2da5c2fc.js","assets/Card-050bf3e7.js","assets/useQuery-a2607d27.js","assets/useToast-6e1913b2.js","assets/line-service-b13602ed.js","assets/Modal-128b9747.js","assets/useMutation-cf360b2b.js"])),z=()=>{const{data:o,isLoading:t,refetch:i}=P(),[n,r]=c.useState(),[d,a]=c.useState(!1),p=l=>{r(l),a(!0)},s=async l=>{i(),l.detail.complete()};return e.jsxs(e.Fragment,{children:[e.jsx(S,{slot:"fixed",onIonRefresh:s,children:e.jsx(g,{})}),e.jsx(C,{children:e.jsx(E,{children:e.jsx(M,{children:e.jsx(R,{title:"Data Department",children:t?e.jsx(x,{name:"crescent"}):e.jsx(c.Suspense,{fallback:e.jsx(x,{name:"crescent"}),children:e.jsx(U,{data:o,handleClickBtnEdit:l=>p(l)})})})})})}),e.jsx(O,{data:n,isOpen:d,onDidDismiss:()=>a(!1)})]})};export{z as default};
