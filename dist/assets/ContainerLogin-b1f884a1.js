import{C as g,D as b,E as w,F as S,G as y,H as v,r as L,j as s,J as d,c as m,L as D,M as p,N,O as P}from"./index-df07a18a.js";import{u as k}from"./useMutation-cf360b2b.js";import{a as C,u as E,s as F}from"./useToast-6e1913b2.js";const T="/authentication",B=async t=>{try{return await C(`${T}/`,t)}catch(n){throw n}},M=()=>{const t=g(),{setLoading:n}=b(),{errorToast:a,successToast:r}=E(),{setUser:c}=w(),{setDepartment:e}=S(),{setLine:l}=y(),{loginUser:i}=v();return k({mutationFn:o=>B(o),onMutate:()=>{n(!0)},onError:async o=>{a(o)},onSuccess:async o=>{const{data:u,message:x}=o,{user:h,department:j,line:f,token:I}=u;F(I),c(h),e(j),l(f),r(x),i()},onSettled:(o,u)=>{n(!1),u===null&&t.replace("/home")}})},O=()=>{const[t,n]=L.useState({badgeId:"",password:""}),{mutate:a}=M(),r=(e,l)=>{n(i=>({...i,[e]:l}))},c=e=>{e.preventDefault(),a(t)};return s.jsxs("form",{onSubmit:c,children:[s.jsxs(d,{children:[s.jsx(m,{icon:D,slot:"start"}),s.jsx(p,{type:"text",label:"BadgeId",labelPlacement:"floating",value:t.badgeId,onIonInput:e=>r("badgeId",e.detail.value)})]}),s.jsxs(d,{children:[s.jsx(m,{icon:N,slot:"start"}),s.jsx(p,{type:"password",label:"Password",labelPlacement:"floating",value:t.password,onIonInput:e=>r("password",e.detail.value)})]}),s.jsx(P,{type:"submit",expand:"block",children:"Login"})]})},H=()=>s.jsx("div",{className:"flex flex-col items-center justify-center w-screen h-full",children:s.jsxs("div",{className:"w-10/12 p-5 rounded shadow-md md:w-1/2 lg:w-1/3",children:[s.jsx("div",{className:"font-['Source_Sans_3'] text-center mb-2",children:s.jsx("span",{className:"text-xl",children:"Production Control Board"})}),s.jsx("div",{children:s.jsx(O,{})})]})});export{H as default};
