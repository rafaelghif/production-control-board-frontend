System.register(["./index-legacy-bd75f99b.js","./Card-legacy-29f4711c.js","./useQuery-legacy-a6ea86d5.js","./useToast-legacy-41791847.js","./control-board-setting-legacy-8403a109.js","./Modal-legacy-e1e92521.js","./useMutation-legacy-79572226.js"],(function(e,n){"use strict";var t,a,l,r,i,o,s,d,c,u,y,g,m,j,x,h,p,v,b,f,I,T,S,k,D;return{setters:[e=>{t=e.D,a=e.X,l=e.r,r=e._,i=e.F,o=e.j,s=e.I,d=e.J,c=e.M,u=e.Y,y=e.O,g=e.E,m=e.T,j=e.U,x=e.P,h=e.Q,p=e.R},e=>{v=e.C},e=>{b=e.u},e=>{f=e.u},e=>{I=e.g,T=e.u,S=e.a},e=>{k=e.M},e=>{D=e.u}],execute:function(){const P=l.lazy((()=>r((()=>n.import("./SelectLineByDepartment-legacy-691f017c.js")),void 0))),q=({isOpen:e,data:n,onDidDismiss:r})=>{const{department:g}=i(),[m,j]=l.useState({}),{mutate:x}=(()=>{const e=a(),{setLoading:n}=t(),{successToast:l,errorToast:r}=f();return D({mutationFn:e=>T(e),onMutate:()=>{n(!0)},onError:async e=>{n(!1),r(e)},onSuccess:async n=>{l(n),e.invalidateQueries({queryKey:["control-board-setting"]})},onSettled:()=>{n(!1)}})})(),h=(e,n)=>{j((t=>({...t,[e]:n})))};return l.useEffect((()=>{j((e=>({...e,actualWorkingTime:null==n?void 0:n.actualWorkingTime,planQty:null==n?void 0:n.planQty,manPowerRegular:null==n?void 0:n.manPowerRegular,shiftTotal:null==n?void 0:n.shiftTotal,LineId:null==n?void 0:n.LineId})))}),[n]),o.jsx(k,{title:"Update Control Board Setting",isOpen:e,onDidDismiss:r,children:o.jsxs("form",{onSubmit:e=>{e.preventDefault(),x(m),r()},children:[o.jsx(l.Suspense,{fallback:o.jsx(s,{name:"crescent"}),children:o.jsx(P,{value:null==m?void 0:m.LineId,departmentId:g.id,onChange:e=>h("LineId",e)})}),o.jsx(d,{children:o.jsx(c,{type:"number",label:"Actual Working Time",labelPlacement:"floating",value:null==m?void 0:m.actualWorkingTime,onIonInput:e=>h("actualWorkingTime",e.detail.value),required:!0})}),o.jsx(d,{children:o.jsx(c,{type:"number",label:"Plan QTY",labelPlacement:"floating",value:null==m?void 0:m.planQty,onIonInput:e=>h("planQty",e.detail.value),required:!0})}),o.jsx(d,{children:o.jsx(c,{type:"number",label:"Man Power Regular",labelPlacement:"floating",value:null==m?void 0:m.manPowerRegular,onIonInput:e=>h("manPowerRegular",e.detail.value),required:!0})}),o.jsx(d,{children:o.jsx(c,{type:"number",label:"Shift Total",labelPlacement:"floating",value:null==m?void 0:m.shiftTotal,onIonInput:e=>h("shiftTotal",e.detail.value),required:!0})}),o.jsx(d,{children:o.jsx(u,{checked:null==m?void 0:m.inActive,onIonChange:e=>h("inActive",e.detail.checked),children:"InActive"})}),o.jsx(y,{type:"submit",expand:"block",children:"Submit"})]})})},L=l.lazy((()=>r((()=>n.import("./TableControlBoardSetting-legacy-1e4e58b9.js")),void 0)));e("default",(()=>{const{department:e}=i(),{user:n}=g(),{data:a,isLoading:r,refetch:d}="Basic"!==n.role?(()=>{const{setLoading:e}=t(),{errorToast:n}=f();return b({queryKey:["control-board-setting"],queryFn:()=>S(),onError:async t=>{n(t),e(!1)},onSettled:async()=>{e(!1)},refetchOnWindowFocus:!1,retry:!1})})():(e=>{const{setLoading:n}=t(),{errorToast:a}=f();return b({queryKey:["control-board-setting",{departmentId:e}],queryFn:()=>I(e),onError:async e=>{a(e),n(!1)},onSettled:async()=>{n(!1)},refetchOnWindowFocus:!1,retry:!1})})(e.id),[c,u]=l.useState(),[y,T]=l.useState(!1);return o.jsxs(o.Fragment,{children:[o.jsx(m,{slot:"fixed",onIonRefresh:async e=>{d(),e.detail.complete()},children:o.jsx(j,{})}),o.jsx(x,{children:o.jsx(h,{children:o.jsx(p,{children:o.jsx(v,{title:"Data Control Board Setting",children:r?o.jsx(s,{name:"crescent"}):o.jsx(l.Suspense,{fallback:o.jsx(s,{name:"crescent"}),children:o.jsx(L,{data:a,handleClickBtnEdit:e=>(e=>{u(e),T(!0)})(e)})})})})})}),o.jsx(q,{data:c,isOpen:y,onDidDismiss:()=>T(!1)})]})}))}}}));
