import{r as o,j as e,J as g,M as C,X as L,D as M,_ as T,G as _,I as v,P as E,Q as w,R as f,O as z}from"./index-df07a18a.js";import{M as F}from"./Modal-128b9747.js";import{f as h,p as Q}from"./date-fns-2da5c2fc.js";import{C as R}from"./Card-050bf3e7.js";import{u as x}from"./useToast-6e1913b2.js";import{u as k}from"./useMutation-cf360b2b.js";import{c as $}from"./control-board-planning-e3c1cc3a.js";const G=({value:l,onChange:i})=>{const[t,r]=o.useState({time:"07:00",qty:0}),n=(s,u)=>{r(d=>({...d,[s]:u})),i({...t,[s]:u})};return o.useEffect(()=>{r(l)},[l]),e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(C,{type:"time",label:"Time",labelPlacement:"floating",value:t.time,onIonInput:s=>n("time",s.detail.value),disabled:!0})}),e.jsx(g,{children:e.jsx(C,{type:"number",value:t.qty,label:"Qty",labelPlacement:"floating",min:0,onIonInput:s=>n("qty",s.detail.value)})})]})},I=[{time:"07:00",sequence:1,qty:0},{time:"08:00",sequence:2,qty:0},{time:"09:00",sequence:3,qty:0},{time:"10:00",sequence:4,qty:0},{time:"11:00",sequence:5,qty:0},{time:"12:00",sequence:6,qty:0},{time:"13:00",sequence:7,qty:0},{time:"14:00",sequence:8,qty:0},{time:"15:00",sequence:9,qty:0},{time:"16:00",sequence:10,qty:0},{time:"17:00",sequence:11,qty:0},{time:"18:00",sequence:12,qty:0},{time:"19:00",sequence:13,qty:0},{time:"20:00",sequence:14,qty:0},{time:"21:00",sequence:15,qty:0},{time:"22:00",sequence:16,qty:0},{time:"23:00",sequence:17,qty:0},{time:"00:00",sequence:18,qty:0},{time:"01:00",sequence:19,qty:0},{time:"02:00",sequence:20,qty:0},{time:"03:00",sequence:21,qty:0},{time:"04:00",sequence:22,qty:0},{time:"05:00",sequence:23,qty:0},{time:"06:00",sequence:24,qty:0}],O=()=>{const l=L(),{setLoading:i}=M(),{successToast:t,errorToast:r}=x();return k({mutationFn:n=>$(n),onMutate:()=>{i(!0)},onError:async n=>{i(!1),r(n)},onSuccess:async n=>{t(n),l.invalidateQueries({queryKey:["control-board-planning"]})},onSettled:()=>{i(!1)}})},V=o.lazy(()=>T(()=>import("./FormControlBoardPlanning-e56ef50a.js"),["assets/FormControlBoardPlanning-e56ef50a.js","assets/index-df07a18a.js","assets/index-4515709d.css"])),W=({isOpen:l,onDidDismiss:i})=>{const{line:t}=_(),{warningToast:r}=x(),[n,s]=o.useState(!1),[u,d]=o.useState({date:h(new Date),LineId:t.id}),[q,y]=o.useState(I),{mutate:P}=O(),j=(a,c)=>{d(m=>({...m,[a]:c}))},S=a=>{a.preventDefault(),u.LineId?s(!0):r("Please fill Line")},p=()=>{i(),s(!1),d({date:h(new Date),LineId:t.id}),y(I)},b=(a,c)=>{y(q.map((m,D)=>c!==D?m:a))},B=()=>{P({planning:u,planningDetails:q}),p()};return e.jsx(F,{title:"Create Control Board Planning",isOpen:l,onDidDismiss:p,children:e.jsx(o.Suspense,{fallback:e.jsx(v,{name:"crescent"}),children:n?e.jsx(E,{children:e.jsxs(w,{children:[q.map((a,c)=>e.jsx(f,{size:"12",sizeMd:"6",children:e.jsx(R,{title:`Time ${a.time} - ${Q(a.time)}`,headerColor:"light",children:e.jsx(G,{value:a,onChange:m=>b(m,c)})})},`planning-detail-${c}`)),e.jsx(f,{size:"12",children:e.jsx(z,{expand:"block",onClick:B,children:"Submit"})})]})}):e.jsx(V,{controlBoardPlanning:u,handleInputControlBoardPlanning:j,handleSubmit:S,line:t.id})})})};export{W as default};
