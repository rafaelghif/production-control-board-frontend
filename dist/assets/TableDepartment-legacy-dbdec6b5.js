System.register(["./index-legacy-bd75f99b.js","./Table-legacy-239c420a.js","./date-fns-legacy-b76df621.js","./Card-legacy-29f4711c.js","./useQuery-legacy-a6ea86d5.js","./useToast-legacy-41791847.js","./line-service-legacy-232d6d99.js","./Modal-legacy-e1e92521.js","./useMutation-legacy-79572226.js"],(function(e,t){"use strict";var n,a,s,i,l,r,c,d,o,u,m,j,p,x,v,y,h,b,g,f,D,I,S,A,C,O;return{setters:[e=>{n=e.D,a=e.X,s=e.r,i=e.j,l=e.J,r=e.M,c=e.Y,d=e.O,o=e._,u=e.T,m=e.U,j=e.P,p=e.Q,x=e.R,v=e.I,y=e.aj},e=>{h=e.T},e=>{b=e.a},e=>{g=e.C},e=>{f=e.u},e=>{D=e.u},e=>{I=e.a,S=e.u,A=e.c},e=>{C=e.M},e=>{O=e.u}],execute:function(){const T=({isOpen:e,data:t,onDidDismiss:o})=>{const[u,m]=s.useState({}),{mutate:j}=(()=>{const e=a(),{setLoading:t}=n(),{successToast:s,errorToast:i}=D();return O({mutationFn:e=>S(e),onMutate:()=>{t(!0)},onError:async e=>{t(!1),i(e)},onSuccess:async t=>{s(t),e.invalidateQueries({queryKey:["lines"]})},onSettled:()=>{t(!1)}})})(),p=(e,t)=>{m((n=>({...n,[e]:t})))};return s.useEffect((()=>{m((e=>({...e,id:null==t?void 0:t.id,name:null==t?void 0:t.name,inActive:null==t?void 0:t.inActive,DepartmentId:null==t?void 0:t.DepartmentId})))}),[t]),i.jsx(C,{title:"Update Line",isOpen:e,onDidDismiss:o,children:i.jsxs("form",{onSubmit:e=>{e.preventDefault(),j(u),o()},children:[i.jsx(l,{children:i.jsx(r,{type:"text",label:"Id",labelPlacement:"floating",value:null==u?void 0:u.id,onIonInput:e=>p("id",e.detail.value),required:!0,disabled:!0})}),i.jsx(l,{children:i.jsx(r,{type:"text",label:"Name",labelPlacement:"floating",value:null==u?void 0:u.name,onIonInput:e=>p("name",e.detail.value),required:!0})}),i.jsx(l,{children:i.jsx(c,{checked:null==u?void 0:u.inActive,onIonChange:e=>p("inActive",e.detail.checked),children:"InActive"})}),i.jsx(d,{type:"submit",expand:"block",children:"Submit"})]})})},k=({isOpen:e,departmentId:t,onDidDismiss:c})=>{const[o,u]=s.useState({name:"",DepartmentId:t}),{mutate:m}=(()=>{const e=a(),{setLoading:t}=n(),{successToast:s,errorToast:i}=D();return O({mutationFn:e=>A(e),onMutate:()=>{t(!0)},onError:async e=>{t(!1),i(e)},onSuccess:async t=>{s(t),e.invalidateQueries({queryKey:["lines"]})},onSettled:()=>{t(!1)}})})();return s.useEffect((()=>{u((e=>({...e,DepartmentId:t})))}),[t]),i.jsx(C,{title:"Create Line",isOpen:e,onDidDismiss:c,children:i.jsxs("form",{onSubmit:e=>{e.preventDefault(),m(o),u({name:"",DepartmentId:t}),c()},children:[i.jsx(l,{children:i.jsx(r,{type:"text",label:"Name",labelPlacement:"floating",value:o.name,onIonInput:e=>{return t="name",n=e.detail.value,void u((e=>({...e,[t]:n})));var t,n},required:!0})}),i.jsx(d,{type:"submit",expand:"block",children:"Submit"})]})})},E=s.lazy((()=>o((()=>t.import("./TableLine-legacy-a8c00f4a.js")),void 0))),L=({data:e})=>{const{data:t,isLoading:a,refetch:l}=(e=>{const{setLoading:t}=n(),{errorToast:a}=D();return f({queryKey:["lines",{departmentId:e}],queryFn:()=>I(e),onError:async e=>{a(e),t(!1)},onSettled:async()=>{t(!1)},refetchOnWindowFocus:!1,retry:!1})})(e.id),[r,c]=s.useState(),[o,y]=s.useState(!1),[h,b]=s.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsx(u,{slot:"fixed",onIonRefresh:async e=>{l(),e.detail.complete()},children:i.jsx(m,{})}),i.jsx(j,{children:i.jsxs(p,{children:[i.jsx(x,{size:"12",children:i.jsx(d,{onClick:()=>y(!0),fill:"clear",className:"float-right",children:"Create Line"})}),i.jsx(x,{size:"12",children:i.jsx(g,{title:`Data Line ${e.name}`,children:a?i.jsx(v,{name:"crescent"}):i.jsx(s.Suspense,{fallback:i.jsx(v,{name:"crescent"}),children:i.jsx(E,{data:t,handleClickBtnEdit:e=>(e=>{c(e),b(!0)})(e)})})})})]})}),i.jsx(k,{departmentId:e.id,isOpen:o,onDidDismiss:()=>y(!1)}),i.jsx(T,{data:r,isOpen:h,onDidDismiss:()=>b(!1)})]})};e("default",(({data:e=[],handleClickBtnEdit:t})=>{const n=s.useMemo((()=>[{name:"Name",selector:e=>e.name,sortable:!0,wrap:!0},{name:"Abbreviation",selector:e=>e.abbreviation,sortable:!0,wrap:!0},{name:"Status",cell:e=>i.jsx(y,{color:e.inActive?"danger":"success",children:e.inActive?"InActive":"Active"}),sortable:!0},{name:"Update By",selector:e=>e.updatedBy,sortable:!0},{name:"Update At",selector:e=>b(e.updatedAt),sortable:!0,wrap:!0},{name:"Edit",cell:e=>i.jsx(d,{fill:"clear",color:"warning",onClick:()=>{t(e)},children:"Edit"}),center:!0}]),[t]);return i.jsx(h,{columns:n,data:e,responsive:!0,pagination:!0,striped:!0,highlightOnHover:!0,expandableRows:!0,expandableRowsComponent:L})}))}}}));
