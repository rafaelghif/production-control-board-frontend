import{X as h,D as v,r as u,_ as p,j as e,J as d,M as c,Z as b,$ as m,I as f,O as S}from"./index-df07a18a.js";import{M as g}from"./Modal-128b9747.js";import{u as y}from"./useMutation-cf360b2b.js";import{u as D}from"./useToast-6e1913b2.js";import{c as _}from"./user-service-3b7f6913.js";const L=()=>{const i=h(),{setLoading:s}=v(),{successToast:a,errorToast:r}=D();return y({mutationFn:n=>_(n),onMutate:()=>{s(!0)},onError:async n=>{s(!1),r(n)},onSuccess:async n=>{a(n),i.invalidateQueries({queryKey:["users"]})},onSettled:()=>{s(!1)}})},C=u.lazy(()=>p(()=>import("./SelectDepartment-07994963.js"),["assets/SelectDepartment-07994963.js","assets/index-df07a18a.js","assets/index-4515709d.css","assets/useQuery-a2607d27.js","assets/useToast-6e1913b2.js","assets/department-service-381213db.js"])),B=u.lazy(()=>p(()=>import("./SelectLineByDepartment-4b5ff669.js"),["assets/SelectLineByDepartment-4b5ff669.js","assets/index-df07a18a.js","assets/index-4515709d.css","assets/useQuery-a2607d27.js","assets/useToast-6e1913b2.js","assets/line-service-b13602ed.js"])),q=({isOpen:i,onDidDismiss:s})=>{const[a,r]=u.useState({badgeId:"",password:"",name:"",role:"Basic",DepartmentId:"",LineId:""}),{mutate:n}=L(),o=(t,l)=>{r(j=>({...j,[t]:l}))},I=t=>{r(l=>({...l,DepartmentId:t})),r(l=>({...l,LineId:""}))},x=t=>{t.preventDefault(),n(a),r({badgeId:"",password:"",name:"",role:"Basic",DepartmentId:"",LineId:""}),s()};return e.jsx(g,{title:"Create User",isOpen:i,onDidDismiss:s,children:e.jsxs("form",{onSubmit:x,children:[e.jsx(d,{children:e.jsx(c,{type:"text",label:"Badge Id",labelPlacement:"floating",value:a.badgeId,onIonInput:t=>o("badgeId",t.detail.value),required:!0})}),e.jsx(d,{children:e.jsx(c,{type:"password",label:"Password",labelPlacement:"floating",value:a.password,onIonInput:t=>o("password",t.detail.value),required:!0})}),e.jsx(d,{children:e.jsx(c,{type:"text",label:"Name",labelPlacement:"floating",value:a.name,onIonInput:t=>o("name",t.detail.value),required:!0})}),e.jsx(d,{children:e.jsxs(b,{value:a.role,onIonChange:t=>o("role",t.detail.value),children:[e.jsx(m,{value:"Basic",children:"Basic"}),e.jsx(m,{value:"Admin",children:"Admin"}),e.jsx(m,{value:"Super User",children:"Super User"})]})}),e.jsxs(u.Suspense,{fallback:e.jsx(f,{name:"crescent"}),children:[e.jsx(C,{value:a.DepartmentId,onChange:t=>I(t)}),a.DepartmentId&&e.jsx(B,{value:a.LineId,departmentId:a.DepartmentId,onChange:t=>o("LineId",t)})]}),e.jsx(S,{type:"submit",expand:"block",children:"Submit"})]})})};export{q as default};
