import{D as m,j as e,r as i,_ as S,G as g,P as O,Q as v,R as u,I as k,J as w,M as C,O as _}from"./index-df07a18a.js";import{u as x}from"./useMutation-cf360b2b.js";import{a as p,u as j}from"./useToast-6e1913b2.js";import{C as L}from"./Card-050bf3e7.js";const f="/order",E=async r=>{try{return(await p(`${f}/input`,{serialNumber:r})).data}catch(s){throw s}},T=async r=>{try{return await p(`${f}/`,r)}catch(s){throw s}},P=()=>{const{setLoading:r}=m(),{errorToast:s}=j();return x({mutationFn:t=>E(t),onMutate:()=>{r(!0)},onError:async t=>{r(!1),s(t)},onSettled:()=>{r(!1)}})},M=({children:r})=>e.jsx("div",{className:"grid grid-cols-2 gap-4 p-5 font-['Source_Sans_3']",children:r}),o=({title:r,text:s})=>e.jsxs("div",{className:"pl-3 border-l border-black dark:border-slate-400",children:[e.jsx("div",{className:"font-semibold",children:r}),e.jsx("div",{children:s||"-"})]}),F=()=>{const{setLoading:r}=m(),{successToast:s,errorToast:t}=j();return x({mutationFn:n=>T(n),onMutate:()=>{r(!0)},onError:async n=>{r(!1),t(n)},onSuccess:n=>{s(n.message)},onSettled:()=>{r(!1)}})},G=i.lazy(()=>S(()=>import("./Clock-a0c13412.js"),["assets/Clock-a0c13412.js","assets/index-df07a18a.js","assets/index-4515709d.css","assets/date-fns-2da5c2fc.js"])),z=()=>{const{line:r}=g(),s={serialNumberType:"Inhouse",serialNumber:"",model:"",barcodeIssueNo:"",sapLinkageNo:""},[t,n]=i.useState(s),[h,d]=i.useState(""),I=P(),b=F(),l=()=>{n(s),d("")},N=async c=>{if(c.key==="Enter")try{const a=await I.mutateAsync(h);n(a!=null?a:s)}catch(a){l()}},y=()=>{b.mutate({...t,LineId:r.id}),l()};return e.jsx(O,{children:e.jsxs(v,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center w-full gap-3",children:[e.jsx("div",{children:e.jsx(i.Suspense,{fallback:e.jsx(k,{name:"crescent"}),children:e.jsx(G,{})})}),e.jsx("div",{className:"w-1/3",children:e.jsx(w,{children:e.jsx(C,{type:"text",label:"Serial Number",labelPlacement:"floating",onFocus:l,onIonInput:c=>d(c.detail.value),onKeyUp:N,clearOnEdit:!0})})})]})}),e.jsx(u,{size:"12",children:e.jsx("div",{className:"flex flex-col items-center justify-center w-full",children:e.jsx("div",{className:"w-full xl:w-2/3",children:e.jsxs(L,{title:"Order Information",headerColor:"light",children:[e.jsxs(M,{children:[e.jsx(o,{title:"Serial Number",text:t.serialNumber}),e.jsx(o,{title:"Serial Number Type",text:t.serialNumberType}),e.jsx(o,{title:"Model",text:t.model}),e.jsx(o,{title:"SAP Linkage No",text:t.sapLinkageNo}),e.jsx(o,{title:"Barcode Issue No",text:t.barcodeIssueNo})]}),e.jsx(_,{expand:"block",onClick:y,disabled:!t.serialNumber,children:"Submit"})]})})})})]})})};export{z as default};
