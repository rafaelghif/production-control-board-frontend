import{D as x,X as g,r as l,j as t,J as d,M as p,O as b,_ as h,P as C,Q as I,R as v,I as m,aj as S}from"./index-df07a18a.js";import{T as D}from"./Table-78c0577c.js";import{a as P}from"./date-fns-2da5c2fc.js";import{C as T}from"./Card-050bf3e7.js";import{u as q}from"./useQuery-a2607d27.js";import{u as f}from"./useToast-6e1913b2.js";import{a as B,b as E}from"./control-board-planning-e3c1cc3a.js";import{M}from"./Modal-128b9747.js";import{u as L}from"./useMutation-cf360b2b.js";const _=r=>{const{setLoading:n}=x(),{errorToast:o}=f();return q({queryKey:["control-board-planning-detail",{controlBoardPlanningId:r}],queryFn:()=>B(r),onError:async e=>{o(e),n(!1)},onSettled:async()=>{n(!1)},refetchOnWindowFocus:!1,retry:!1})},w=()=>{const r=g(),{setLoading:n}=x(),{successToast:o,errorToast:e}=f();return L({mutationFn:s=>E(s),onMutate:()=>{n(!0)},onError:async s=>{n(!1),e(s)},onSuccess:async s=>{o(s),r.invalidateQueries({queryKey:["control-board-planning-detail"]})},onSettled:()=>{n(!1)}})},A=({isOpen:r,data:n,onDidDismiss:o})=>{const[e,s]=l.useState({}),{mutate:u}=w(),i=(a,y)=>{s(j=>({...j,[a]:y}))},c=a=>{a.preventDefault(),u(e),o()};return l.useEffect(()=>{s(a=>({...a,id:n==null?void 0:n.id,qty:n==null?void 0:n.qty}))},[n]),t.jsx(M,{title:"Update Control Board Planning Detail",isOpen:r,onDidDismiss:o,children:t.jsxs("form",{onSubmit:c,children:[t.jsx(d,{children:t.jsx(p,{type:"text",label:"Id",labelPlacement:"floating",value:e==null?void 0:e.id,onIonInput:a=>i("id",a.detail.value),required:!0,disabled:!0})}),t.jsx(d,{children:t.jsx(p,{type:"number",label:"Qty",labelPlacement:"floating",value:e==null?void 0:e.qty,onIonInput:a=>i("qty",a.detail.value),required:!0})}),t.jsx(b,{type:"submit",expand:"block",children:"Submit"})]})})},O=l.lazy(()=>h(()=>import("./TableControlBoardPlanningDetail-31678f19.js"),["assets/TableControlBoardPlanningDetail-31678f19.js","assets/index-df07a18a.js","assets/index-4515709d.css","assets/Table-78c0577c.js","assets/date-fns-2da5c2fc.js"])),U=({data:r})=>{const{data:n,isLoading:o}=_(r.id),[e,s]=l.useState(),[u,i]=l.useState(!1),c=a=>{s(a),i(!0)};return t.jsxs(t.Fragment,{children:[t.jsx(C,{children:t.jsx(I,{children:t.jsx(v,{size:"12",children:t.jsx(T,{title:`Detail ${r.Line.name} ${r.date}`,headerColor:"light",children:o?t.jsx(m,{name:"crescent"}):t.jsx(l.Suspense,{fallback:t.jsx(m,{name:"crescent"}),children:t.jsx(O,{data:n,handleClickBtnEdit:a=>c(a)})})})})})}),t.jsx(A,{isOpen:u,data:e,onDidDismiss:()=>i(!1)})]})},H=({data:r=[],handleClickBtnEdit:n})=>{const o=l.useMemo(()=>[{name:"Date",selector:e=>e.date,sortable:!0,wrap:!0},{name:"Line",selector:e=>e.Line.name,sortable:!0,wrap:!0},{name:"Status",cell:e=>t.jsx(S,{color:e.inActive?"danger":"success",children:e.inActive?"InActive":"Active"}),sortable:!0},{name:"Update By",selector:e=>e.updatedBy,sortable:!0},{name:"Update At",selector:e=>P(e.updatedAt),sortable:!0,wrap:!0},{name:"Edit",cell:e=>t.jsx(b,{fill:"clear",color:"warning",onClick:()=>{n(e)},children:"Edit"}),center:!0}],[n]);return t.jsx(D,{columns:o,data:r,responsive:!0,pagination:!0,striped:!0,highlightOnHover:!0,expandableRows:!0,expandableRowsComponent:U})};export{H as default};
