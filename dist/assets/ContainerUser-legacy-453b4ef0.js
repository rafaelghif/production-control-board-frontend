System.register(["./index-legacy-bd75f99b.js","./Card-legacy-29f4711c.js","./useQuery-legacy-a6ea86d5.js","./useToast-legacy-41791847.js","./user-service-legacy-3fec57fc.js","./Modal-legacy-e1e92521.js","./useMutation-legacy-79572226.js"],(function(e,n){"use strict";var l,s,a,t,i,d,r,o,u,c,j,v,x,m,p,h,y,I,g,b,D,f,S,L;return{setters:[e=>{l=e.D,s=e.X,a=e.r,t=e._,i=e.j,d=e.J,r=e.M,o=e.Z,u=e.$,c=e.I,j=e.Y,v=e.O,x=e.T,m=e.U,p=e.P,h=e.Q,y=e.R},e=>{I=e.C},e=>{g=e.u},e=>{b=e.u},e=>{D=e.g,f=e.u},e=>{S=e.M},e=>{L=e.u}],execute:function(){const A=a.lazy((()=>t((()=>n.import("./SelectDepartment-legacy-5e42b974.js")),void 0))),C=a.lazy((()=>t((()=>n.import("./SelectLineByDepartment-legacy-691f017c.js")),void 0))),q=({isOpen:e,data:n,onDidDismiss:t})=>{const[x,m]=a.useState({}),{mutate:p}=(()=>{const e=s(),{setLoading:n}=l(),{successToast:a,errorToast:t}=b();return L({mutationFn:e=>f(e),onMutate:()=>{n(!0)},onError:async e=>{n(!1),t(e)},onSuccess:async n=>{a(n),e.invalidateQueries({queryKey:["users"]})},onSettled:()=>{n(!1)}})})(),h=(e,n)=>{m((l=>({...l,[e]:n})))};return a.useEffect((()=>{m((e=>({...e,id:null==n?void 0:n.id,badgeId:null==n?void 0:n.badgeId,password:null==n?void 0:n.password,name:null==n?void 0:n.name,role:null==n?void 0:n.role,inActive:null==n?void 0:n.inActive,DepartmentId:null==n?void 0:n.DepartmentId,LineId:null==n?void 0:n.LineId})))}),[n]),i.jsx(S,{title:"Update User",isOpen:e,onDidDismiss:t,children:i.jsxs("form",{onSubmit:e=>{e.preventDefault(),p(x),t()},children:[i.jsx(d,{children:i.jsx(r,{type:"text",label:"Id",labelPlacement:"floating",value:null==x?void 0:x.id,onIonInput:e=>h("id",e.detail.value),disabled:!0,required:!0})}),i.jsx(d,{children:i.jsx(r,{type:"text",label:"Badge Id",labelPlacement:"floating",value:null==x?void 0:x.badgeId,onIonInput:e=>h("badgeId",e.detail.value),required:!0})}),i.jsx(d,{children:i.jsx(r,{type:"password",label:"Password",labelPlacement:"floating",value:null==x?void 0:x.password,onIonInput:e=>h("password",e.detail.value),required:!0})}),i.jsx(d,{children:i.jsx(r,{type:"text",label:"Name",labelPlacement:"floating",value:null==x?void 0:x.name,onIonInput:e=>h("name",e.detail.value),required:!0})}),i.jsx(d,{children:i.jsxs(o,{value:null==x?void 0:x.role,onIonChange:e=>h("role",e.detail.value),children:[i.jsx(u,{value:"Basic",children:"Basic"}),i.jsx(u,{value:"Admin",children:"Admin"}),i.jsx(u,{value:"Super User",children:"Super User"})]})}),i.jsxs(a.Suspense,{fallback:i.jsx(c,{name:"crescent"}),children:[i.jsx(A,{value:null==x?void 0:x.DepartmentId,onChange:e=>(e=>{m((n=>({...n,DepartmentId:e}))),m((e=>({...e,LineId:""})))})(e)}),x.DepartmentId&&i.jsx(C,{value:null==x?void 0:x.LineId,departmentId:null==x?void 0:x.DepartmentId,onChange:e=>h("LineId",e)})]}),i.jsx(d,{children:i.jsx(j,{checked:null==x?void 0:x.inActive,onIonChange:e=>h("inActive",e.detail.checked),children:"InActive"})}),i.jsx(v,{type:"submit",expand:"block",children:"Submit"})]})})},w=a.lazy((()=>t((()=>n.import("./TableUser-legacy-6259a412.js")),void 0)));e("default",(()=>{const{data:e,isLoading:n,refetch:s}=(()=>{const{setLoading:e}=l(),{errorToast:n}=b();return g({queryKey:["users"],queryFn:()=>D(),onError:async l=>{n(l),e(!1)},onSettled:async()=>{e(!1)},refetchOnWindowFocus:!1,retry:!1})})(),[t,d]=a.useState(),[r,o]=a.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsx(x,{slot:"fixed",onIonRefresh:async e=>{s(),e.detail.complete()},children:i.jsx(m,{})}),i.jsx(p,{children:i.jsx(h,{children:i.jsx(y,{children:i.jsx(I,{title:"Data User",children:n?i.jsx(c,{name:"crescent"}):i.jsx(a.Suspense,{fallback:i.jsx(c,{name:"crescent"}),children:i.jsx(w,{data:e,handleClickBtnEdit:e=>(e=>{d(e),o(!0)})(e)})})})})})}),i.jsx(q,{data:t,isOpen:r,onDidDismiss:()=>o(!1)})]})}))}}}));
